<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GlamVote ‚Äî –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –°—É–ø–µ—Ä –ú–æ–¥–µ–ª–µ–π</title>
<style>
  :root{
    --gold:#d4af37;
    --black:#0b0b0b;
    --beige:#efe6da;
    --gray:#bfb8b0;
    --accent: linear-gradient(135deg, rgba(212,175,55,0.15), rgba(11,11,11,0.05));
    --hero-img: url('background.jpg');
    --font: "Helvetica Neue", Arial, sans-serif;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:var(--font);
    background:var(--beige);
    color:var(--black);
    min-height:100vh;
    display:flex;
    align-items:stretch;
    gap:0;
  }

  /* –õ–µ–≤–æ–µ –º–µ–Ω—é */
  .sidebar{
    width:260px;
    background:
      radial-gradient(circle at 10% 10%, rgba(212,175,55,0.08), transparent 12%),
      linear-gradient(180deg, rgba(0,0,0,0.02), transparent);
    padding:28px 18px;
    border-right: 1px solid rgba(11,11,11,0.06);
    display:flex;
    flex-direction:column;
    gap:18px;
  }
  .brand{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .logo{
    width:54px;height:54px;border-radius:12px;
    background:linear-gradient(135deg,var(--gold),#f0d28a);
    display:flex;align-items:center;justify-content:center;
    font-weight:700;color:var(--black);
    box-shadow:0 6px 18px rgba(11,11,11,0.08);
  }
  .brand h1{font-size:16px;margin:0}
  .name{font-size:13px;color:rgba(0,0,0,0.75)}
  .nav{
    display:flex;flex-direction:column;gap:8px;margin-top:6px;
  }
  .btn{
    padding:10px 12px;border-radius:10px;background:transparent;
    border:1px solid rgba(11,11,11,0.06);cursor:pointer;
    text-align:left;font-weight:600;
  }
  .btn.help{background:linear-gradient(90deg, rgba(212,175,55,0.07), transparent)}
  .contact{
    margin-top:auto;padding:12px;border-radius:10px;background:rgba(11,11,11,0.03);
    font-size:14px;
  }
  .contact b{display:block;color:var(--black);font-size:15px}

  /* –ì–ª–∞–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å ‚Äî —Ñ–æ–Ω —Ñ–æ—Ç–æ */
 .main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
    background-image: url('background.jpg'); /* <- —Ñ–æ—Ç–æ —Ä—è–¥–æ–º —Å HTML */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}
  /* –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å–ª–æ–π –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ */
  .overlay{
    position:absolute;inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.12));
    pointer-events:none;
  }

  /* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–æ–π */
  .center{
    position:relative;z-index:3;max-width:980px;width:100%;
    display:flex;flex-direction:column;align-items:center;gap:22px;padding:28px;
  }
  .vote-btn{
    background:var(--black);
    color:white;
    padding:20px 40px;
    border-radius:14px;
    font-size:22px;
    font-weight:800;
    letter-spacing:1px;
    border:4px solid rgba(212,175,55,0.16);
    box-shadow:0 12px 30px rgba(11,11,11,0.35);
    cursor:pointer;
  }
  .subtitle{
    color:rgba(255,255,255,0.9);
    font-size:15px;background:rgba(0,0,0,0.25);
    padding:10px 14px;border-radius:12px;
    display:flex;gap:10px;align-items:center;
  }

  /* –ú–æ–¥–∞–ª –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ */
  .modal{
    position:fixed;left:50%;top:50%;transform:translate(-50%,-50%) scale(0.98);
    width:min(920px,94%);max-height:86vh;overflow:auto;
    background:linear-gradient(180deg, rgba(255,255,255,0.98), white);
    border-radius:14px;padding:18px;box-shadow:0 30px 80px rgba(11,11,11,0.4);
    z-index:40;display:none;flex-direction:column;gap:12px;
  }
  .modal.open{display:flex;animation:pop .18s ease-out}
  @keyframes pop{from{opacity:0;transform:translate(-50%,-50%) scale(.96)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}

  .modal-header{display:flex;justify-content:space-between;align-items:center}
  .modal-title{font-size:20px;font-weight:800;display:flex;gap:10px;align-items:center}
  .close{background:transparent;border:0;font-size:18px;cursor:pointer}

  .models-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  .card{
    display:flex;gap:12px;padding:10px;border-radius:12px;border:1px solid rgba(11,11,11,0.06);
    align-items:center;background:linear-gradient(180deg, rgba(250,248,244,1), rgba(245,243,238,1));
  }
  .thumb{
    width:120px;height:120px;border-radius:8px;background:#ddd;background-size:cover;background-position:center;flex-shrink:0;border:4px solid rgba(212,175,55,0.06);
    position:relative;overflow:hidden;
  }
  .crown{
    position:absolute;top:6px;right:6px;width:36px;height:36px;border-radius:8px;
    background:linear-gradient(180deg,var(--gold), #f5d27a);display:flex;align-items:center;justify-content:center;font-weight:700;color:#3b2b00;font-size:16px;
    box-shadow:0 6px 12px rgba(212,175,55,0.14);
  }
  .info{flex:1}
  .info h3{margin:0;font-size:18px}
  .info p{margin:6px 0 0 0;font-size:13px;color: #444}

  .select-row{display:flex;align-items:center;gap:12px;margin-top:10px}
  .radio{width:18px;height:18px;border-radius:50%;border:2px solid var(--gray);display:inline-block;cursor:pointer;flex-shrink:0}
  .radio.checked{background:var(--gold);border-color:var(--gold)}

  .modal-footer{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:8px}
  .submit-btn{
    background:linear-gradient(90deg,var(--gold), #f0d28a);
    border:0;padding:12px 18px;border-radius:10px;font-weight:800;cursor:pointer;
    box-shadow:0 8px 18px rgba(212,175,55,0.14);
  }

  /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã / —Ç–∞–±–ª–∏—Ü–∞ */
  .results{
    width:100%;background:rgba(255,255,255,0.9);padding:12px;border-radius:12px;border:1px solid rgba(11,11,11,0.04);
    display:flex;flex-direction:column;gap:10px;margin-top:6px;
  }
  .result-row{display:flex;align-items:center;gap:12px}
  .bar{
    height:14px;background:linear-gradient(90deg,var(--gold), #f0d28a);
    border-radius:8px;flex:1;min-width:80px;box-shadow:inset 0 -3px 8px rgba(0,0,0,0.06);
  }
  .percent{min-width:44px;text-align:right;font-weight:700;color:#333}

  /* –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π —ç–∫—Ä–∞–Ω */
  .celebrate{
    position:fixed;inset:0;display:none;z-index:60;align-items:center;justify-content:center;flex-direction:column;
    background:linear-gradient(180deg, rgba(11,11,11,0.6), rgba(11,11,11,0.5));
  }
  .celebrate.show{display:flex}
  .final-card{
    background:linear-gradient(90deg, rgba(245,241,236,1), rgba(255,250,240,1));
    padding:28px;border-radius:16px;box-shadow:0 30px 80px rgba(11,11,11,0.4);text-align:center;
  }
  .final-card h2{margin:6px 0 10px 0;color:var(--gold)}
  .confetti{
    position:absolute;inset:0;pointer-events:none;
  }

  /* –º–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
  @media (max-width:880px){
    .sidebar{display:none}
    .models-grid{grid-template-columns:1fr}
    .thumb{width:100px;height:100px}
    .center{padding:12px}
  }

  /* –Ω–µ–±–æ–ª—å—à–∞—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–º–∫–∞ */
  .frame{
    position:absolute;inset:8px;border-radius:18px;pointer-events:none;
    background:conic-gradient(from 210deg at 50% 50%, rgba(212,175,55,0.05), transparent 20%);
    mix-blend-mode:soft-light;opacity:0.7;
  }

  /* –ø–æ–¥—Å–∫–∞–∑–∫–∏ */
  .small{font-size:13px;color:rgba(0,0,0,0.6)}
</style>
</head>
<body>
  <aside class="sidebar" aria-label="–û—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é">
    <div class="brand">
      <div class="logo">GV</div>
      <div>
        <h1>GlamVote</h1>
        <div class="name">–°–∞—Ä—Å–µ–º–∞–ª–∏ –ñ–∞–Ω–µ—Ä–∫–µ</div>
      </div>
    </div>

    <nav class="nav" role="navigation">
      <button class="btn" onclick="scrollToTop()">üè† –î–æ–º–æ–π</button>
      <button class="btn help" onclick="openHelp()">‚ùì –ü–æ–º–æ—â—å</button>
      <button class="btn" onclick="openAbout()">‚ÑπÔ∏è –û–±–æ –º–Ω–µ</button>
    </nav>

    <div class="contact" aria-hidden="false">
      <div class="small">–î–ª—è —Å–≤—è–∑–∏:</div>
      <b>+7 777 020 2007</b>
      <div class="small" style="margin-top:8px">–ò–º—è: –°–∞—Ä—Å–µ–º–∞–ª–∏ –ñ–∞–Ω–µ—Ä–∫–µ</div>
    </div>
  </aside>

  <main class="main" role="main">
    <div class="overlay"></div>
    <div class="frame" aria-hidden="true"></div>

    <div class="center">
      <div class="subtitle">–ì–æ–ª–æ—Å—É–π –∑–∞ —Å–≤–æ—é –ª—é–±–∏–º—É—é –º–æ–¥–µ–ª—å ‚Äî –≤—Å—ë –≤ —Ç—ë–ø–ª—ã—Ö –∑–æ–ª–æ—Ç—ã—Ö —Ç–æ–Ω–∞—Ö ‚ú®</div>

      <button class="vote-btn" id="openVoteBtn" aria-haspopup="dialog">–ì–û–õ–û–°–û–í–ê–ù–ò–ï</button>

      <div class="small" style="color:rgba(255,255,255,0.9)">
        –§–æ–Ω —Ñ–æ—Ç–æ –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å: –æ—Ç–∫—Ä–æ–π—Ç–µ <code>--hero-img</code> –≤ CSS –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à—É –∫–∞—Ä—Ç–∏–Ω–∫—É.
      </div>

      <div id="resultsBox" style="width:100%;max-width:900px"></div>

      <div style="display:flex;gap:12px;margin-top:8px">
        <button class="btn" onclick="endVoting()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ (–ø—Ä–∞–∑–¥–Ω–∏–∫)</button>
        <button class="btn" onclick="resetVotes()">–°–±—Ä–æ—Å–∏—Ç—å –≥–æ–ª–æ—Å–∞</button>
      </div>
    </div>

    <!-- –ú–æ–¥–∞–ª –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è -->
    <div class="modal" id="voteModal" role="dialog" aria-modal="true" aria-labelledby="voteTitle">
      <div class="modal-header">
        <div class="modal-title" id="voteTitle">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 2l2.2 4.5L19 8l-3.5 3.2L16 16l-4-2.2L8 16l.5-4.8L5 8l4.8-1.5L12 2z" fill="#d4af37"/></svg>
          –í—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –¥–ª—è –≥–æ–ª–æ—Å–∞
        </div>
        <button class="close" onclick="closeModal()">‚úï</button>
      </div>

      <div class="small">–ü–µ—Ä–µ–¥ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏.</div>

      <div class="models-grid" id="modelsGrid">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –º–æ–¥–µ–ª–µ–π –±—É–¥—É—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω—ã JS -->
      </div>

      <div class="modal-footer">
        <div class="small">–í—ã–±—Ä–∞–Ω–æ: <span id="chosenName">‚Äî</span></div>
        <div style="display:flex;gap:8px">
          <button class="submit-btn" onclick="submitVote()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å</button>
        </div>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∞–∑–¥–Ω–∏–∫–∞ -->
    <div class="celebrate" id="celebrate">
      <div class="confetti" id="confetti"></div>
      <div class="final-card" id="finalCard">
        <h2>–ì–û–õ–û–°–û–í–ê–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û! üéâ</h2>
        <p id="finalText" style="margin-bottom:12px">–°–ø–∞—Å–∏–±–æ –≤—Å–µ–º, –∫—Ç–æ –≥–æ–ª–æ—Å–æ–≤–∞–ª ‚Äî –≤–æ—Ç –ø–æ–±–µ–¥–∏—Ç–µ–ª—å!</p>
        <div id="finalResultArea"></div>
        <div style="margin-top:12px"><button class="submit-btn" onclick="closeCelebrate()">–ó–∞–∫—Ä—ã—Ç—å</button></div>
      </div>
    </div>

  </main>

<script>
/* ========== –î–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–µ–π ========== */
/* –ó–∞–º–µ–Ω—è–π—Ç–µ description –∏ image –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏. */
const MODELS = [
  {
    id: "kendall",
    name: "–ö–µ–Ω–¥–∞–ª–ª –î–∂–µ–Ω–Ω–µ—Ä",
    image: "images/kendall.jpg",
    description: "–ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∞—è –º–æ–¥–µ–ª—å, –∏–∑–≤–µ—Å—Ç–Ω–∞ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ–π –ø–æ–¥–∞—á–µ–π –∏ —É—á–∞—Å—Ç–∏–µ–º –≤ —à–æ—É-–±–∏–∑–Ω–µ—Å–µ."
  },
  {
    id: "gigi",
    name: "–î–∂–∏–¥–∂–∏ –•–∞–¥–∏–¥",
    image: "images/gigi.jpg",
    description: "–û–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –≤–ª–∏—è—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –ø–æ–∫–æ–ª–µ–Ω–∏—è ‚Äî —Å–æ—á–µ—Ç–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∏–∫–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏."
  },
  {
    id: "bella",
    name: "–ë–µ–ª–ª–∞ –•–∞–¥–∏–¥",
    image: "images/bella.jpg",
    description: "–ò–∑–≤–µ—Å—Ç–Ω–∞ —Å–≤–æ–∏–º–∏ —Å–∏–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏ –∏ –∫–∞—Ç-—É–æ–∫ —Å—Ç–∏–ª–µ–º."
  },
  {
    id: "irina",
    name: "–ò—Ä–∏–Ω–∞ –®–µ–π–∫",
    image: "images/irina.jpg",
    description: "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è —Å—É–ø–µ—Ä–º–æ–¥–µ–ª—å –∏–∑ –†–æ—Å—Å–∏–∏, —Å–æ–µ–¥–∏–Ω—è–µ—Ç –≥–ª–∞–º—É—Ä –∏ —Å–∏–ª—É."
  },
  {
    id: "kate",
    name: "–ö–µ–π—Ç –ú–æ—Å—Å",
    image: "images/kate.jpg",
    description: "–õ–µ–≥–µ–Ω–¥–∞ –º–æ–¥—ã ‚Äî –∏–∫–æ–Ω–∞ 90-—Ö, –¥–æ —Å–∏—Ö –ø–æ—Ä –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤."
  }
];

/* ========== –•—Ä–∞–Ω–µ–Ω–∏–µ –≥–æ–ª–æ—Å–æ–≤ –≤ localStorage ========== */
const STORAGE_KEY = "glamvote_votes_v1";
let votes = loadVotes(); // object {id: count}

/* –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ—Ç) */
function loadVotes(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) return JSON.parse(raw);
  }catch(e){}
  const obj = {};
  MODELS.forEach(m=>obj[m.id]=0);
  localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
  return obj;
}
function saveVotes(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(votes)); }

/* ========== UI: –≤—Å—Ç–∞–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ ========== */
const grid = document.getElementById('modelsGrid');
MODELS.forEach(m=>{
  const card = document.createElement('div');
  card.className = "card";
  card.innerHTML = `
    <div class="thumb" style="background-image:url('${m.image}')">
      <div class="crown">üëë</div>
    </div>
    <div class="info">
      <h3>${m.name}</h3>
      <p>${m.description}</p>
      <div class="select-row">
        <div class="radio" data-id="${m.id}" role="button" tabindex="0" aria-pressed="false"></div>
        <div class="small">–í—ã–±—Ä–∞—Ç—å ${m.name}</div>
      </div>
    </div>
  `;
  grid.appendChild(card);
});

/* —Ä–∞–¥–∏–æ–ø–æ–≤–µ–¥–µ–Ω–∏–µ */
let selectedId = null;
document.querySelectorAll('.radio').forEach(r=>{
  r.addEventListener('click', ()=>selectModel(r.dataset.id));
  r.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ') selectModel(r.dataset.id); });
});
function selectModel(id){
  selectedId = id;
  document.getElementById('chosenName').textContent = MODELS.find(m=>m.id===id).name;
  document.querySelectorAll('.radio').forEach(r=>{
    if(r.dataset.id===id){ r.classList.add('checked'); r.setAttribute('aria-pressed','true'); }
    else{ r.classList.remove('checked'); r.setAttribute('aria-pressed','false'); }
  });
}

/* ========== –ú–æ–¥–∞–ª –æ—Ç–∫—Ä—ã—Ç–∏–µ / –∑–∞–∫—Ä—ã—Ç–∏–µ ========== */
function openModal(){ document.getElementById('voteModal').classList.add('open'); }
function closeModal(){ document.getElementById('voteModal').classList.remove('open'); selectedId=null; document.getElementById('chosenName').textContent='‚Äî'; document.querySelectorAll('.radio').forEach(r=>r.classList.remove('checked')); }

/* –∫–Ω–æ–ø–∫–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è */
document.getElementById('openVoteBtn').addEventListener('click', ()=>{ openModal(); });

/* submit –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è */
function submitVote(){
  if(!selectedId){ alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º.'); return; }
  votes[selectedId] = (votes[selectedId] || 0) + 1;
  saveVotes();
  updateResultsBox();
  closeModal();
  alert('–°–ø–∞—Å–∏–±–æ! –í–∞—à –≥–æ–ª–æ—Å –ø—Ä–∏–Ω—è—Ç.');
}

/* ========== –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ ========== */
function totalVotes(){ return Object.values(votes).reduce((a,b)=>a+b,0); }
function updateResultsBox(){
  const box = document.getElementById('resultsBox');
  const total = totalVotes();
  let html = '<div class="results">';
  MODELS.forEach(m=>{
    const cnt = votes[m.id]||0;
    const pct = total? Math.round((cnt/total)*100):0;
    html += `
      <div class="result-row">
        <div style="width:170px;font-weight:700">${m.name}</div>
        <div style="flex:1;margin-right:12px">
          <div class="bar" style="width:${Math.max(4,pct)}%"></div>
        </div>
        <div class="percent">${pct}%</div>
      </div>
    `;
  });
  html += `<div class="small" style="margin-top:8px">–í—Å–µ–≥–æ –≥–æ–ª–æ—Å–æ–≤: <b>${total}</b></div></div>`;
  box.innerHTML = html;
}
updateResultsBox();

/* –°–±—Ä–æ—Å –≥–æ–ª–æ—Å–æ–≤ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è) */
function resetVotes(){
  if(!confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –≥–æ–ª–æ—Å–∞?')) return;
  MODELS.forEach(m=>votes[m.id]=0);
  saveVotes();
  updateResultsBox();
  alert('–ì–æ–ª–æ—Å–∞ —Å–±—Ä–æ—à–µ–Ω—ã.');
}

/* ========== –ö–æ–Ω–µ—Ü –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è ‚Äî –ø—Ä–∞–∑–¥–Ω–∏–∫ ========== */
function endVoting(){
  // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π —ç–∫—Ä–∞–Ω —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
  const celebrate = document.getElementById('celebrate');
  const finalArea = document.getElementById('finalResultArea');
  // –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
  const total = totalVotes();
  let winnerText = '–ù–µ—Ç –≥–æ–ª–æ—Å–æ–≤';
  if(total>0){
    let winner = MODELS[0];
    MODELS.forEach(m=>{ if((votes[m.id]||0) > (votes[winner.id]||0)) winner = m; });
    winnerText = `${winner.name} ‚Äî –ü–æ–±–µ–¥–∏—Ç–µ–ª—å(–Ω–∏—Ü–∞) —Å ${votes[winner.id]||0} –≥–æ–ª–æ—Å–∞–º–∏!`;
  }
  document.getElementById('finalText').textContent = winnerText;
  finalArea.innerHTML = '';
  // –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ç–æ–≥–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
  const tbl = document.createElement('div');
  tbl.style.display='flex';tbl.style.flexDirection='column';tbl.style.gap='6px';
  MODELS.forEach(m=>{
    const row = document.createElement('div');
    row.style.display='flex';row.style.alignItems='center';row.style.gap='8px';
    row.innerHTML = `<div style="width:160px;font-weight:700">${m.name}</div><div style="flex:1;background:#f2efe9;border-radius:8px;padding:6px">${votes[m.id]||0} –≥–æ–ª–æ—Å–æ–≤</div>`;
    tbl.appendChild(row);
  });
  finalArea.appendChild(tbl);
  celebrate.classList.add('show');
  // –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
  startConfetti();
}

/* –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π —ç–∫—Ä–∞–Ω */
function closeCelebrate(){ stopConfetti(); document.getElementById('celebrate').classList.remove('show'); }

/* ========== –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ (–ø—Ä–æ—Å—Ç–∞—è canvas –∞–Ω–∏–º–∞—Ü–∏—è) ========== */
let confettiInterval=null;
function startConfetti(){
  const container = document.getElementById('confetti');
  container.innerHTML = '<canvas id="confettiCanvas"></canvas>';
  const canvas = container.querySelector('canvas');
  canvas.width = container.clientWidth || window.innerWidth;
  canvas.height = container.clientHeight || window.innerHeight;
  const ctx = canvas.getContext('2d');
  const pieces = [];
  for(let i=0;i<120;i++){
    pieces.push({
      x: Math.random()*canvas.width,
      y: Math.random()*-canvas.height,
      r: Math.random()*6+4,
      d: Math.random()*25+15,
      color: ['#d4af37','#ffffff','#f2d29a','#bfa48a','#ffffff'][Math.floor(Math.random()*5)],
      tilt: Math.random()*10-5,
      tiltSpeed: Math.random()*0.2+0.05
    });
  }
  function render(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    pieces.forEach(p=>{
      p.y += p.d * 0.02 + 1;
      p.x += Math.sin(p.y/30) * 1.5;
      p.tilt += p.tiltSpeed;
      ctx.beginPath();
      ctx.fillStyle = p.color;
      ctx.moveTo(p.x, p.y);
      ctx.lineTo(p.x + p.r/2 + p.tilt, p.y + p.r/2);
      ctx.lineTo(p.x - p.r/2 + p.tilt, p.y + p.r);
      ctx.closePath();
      ctx.fill();
      if(p.y > canvas.height + 20){ p.y = -10; p.x = Math.random()*canvas.width; }
    });
  }
  confettiInterval = setInterval(render, 1000/60);
}
function stopConfetti(){
  clearInterval(confettiInterval); confettiInterval=null;
  const container = document.getElementById('confetti'); container.innerHTML='';
}

/* ========== –£—Ç–∏–ª–∏—Ç—ã –ø–∞–Ω–µ–ª–∏ ========== */
function scrollToTop(){ window.scrollTo({top:0,behavior:'smooth'}); }
function openHelp(){ alert('–ü–æ–º–æ—â—å: –ù–∞–∂–º–∏—Ç–µ "–ì–û–õ–û–°–û–í–ê–ù–ò–ï", –≤—ã–±–µ—Ä–∏—Ç–µ –º–æ–¥–µ–ª—å, –Ω–∞–∂–º–∏—Ç–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å". –î–ª—è —Å–≤—è–∑–∏: +7 777 020 2007'); }
function openAbout(){ alert('–û–±–æ –º–Ω–µ: –°–∞—Ä—Å–µ–º–∞–ª–∏ –ñ–∞–Ω–µ—Ä–∫–µ ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è. –¢–µ–ª–µ—Ñ–æ–Ω: +7 777 020 2007'); }

/* –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ localStorage (–Ω–∞ —Å–ª—É—á–∞–π –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∫–ª–∞–¥–æ–∫) */
window.addEventListener('storage', (e)=>{
  if(e.key===STORAGE_KEY){ votes = JSON.parse(e.newValue); updateResultsBox(); }
});

/* –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø—Ä–∏ Esc */
window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

</script>
</body>
</html>